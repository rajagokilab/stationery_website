{% extends "base.html" %}
{% load static %}

{% block title %}My Order{% endblock %}

{% block content %}
<div class="container py-5 px-3">
    <h1 class="my-5 text-center">Your Order</h1>

    <div class="bg-white rounded-4 shadow-sm p-4 p-md-5 mb-5">
        <!-- Order Info -->
        <div class="card mb-4 border-0">
            {% if items.0.product.image %}
                <img src="{{ items.0.product.image.url }}" class="card-img-top rounded-4" alt="Product image header">
            {% else %}
                <img src="https://placehold.co/1000x200/F0F0F0/FFFFFF?text=Order+Banner" class="card-img-top rounded-4" alt="Order image header">
            {% endif %}

            <div class="card-body px-0">
                <p class="card-text">
                    <small class="text-muted">Order ID :</small> <span class="fw-bold">{{ order.id }}</span><br>
                    <small class="text-muted">Customer :</small> <span class="fw-bold">{{ order.user.username }}</span><br>
                    <small class="text-muted">Payment Mode :</small> <span class="fw-bold">{{ order.get_payment_mode_display }}</span><br>
                    <small class="text-muted">Total Amount :</small> <span class="fw-bold">Rs. {{ order.total_amount }}</span><br>
                    <small class="text-muted">Placed On :</small> <span class="fw-bold">{{ order.created_at|date:"M d, Y" }}</span>
                </p>
            </div>
        </div>
        
        <!-- Order summary table -->
        <div class="card p-4 rounded-4 shadow-sm">
            <table class="table table-borderless">
                <thead>
                    <tr>
                        <th scope="col" class="fw-bold">Product</th>
                        <th scope="col" class="text-center fw-bold">Quantity</th>
                        <th scope="col" class="text-center fw-bold">Unit Price</th>
                        <!-- <th scope="col" class="text-end fw-bold">Total Price</th> -->
                    </tr>
                </thead>
                <tbody>
                    {% for item in items %}
                    <tr>
                        <td>
                            <div class="d-flex align-items-center">
                                {% if item.product.image %}
                                    <img src="{{ item.product.image.url }}" class="me-3 rounded-2" alt="{{ item.product.name }}" style="max-width: 60px;">
                                {% else %}
                                    <img src="https://placehold.co/100x100/E0E0E0/FFFFFF?text=No+Image" class="me-3 rounded-2" alt="No image" style="max-width: 60px;">
                                {% endif %}
                                <div>
                                    <p class="mb-0 fw-bold">{{ item.product.name }}</p>
                                    <p class="mb-0 text-muted">Rs. {{ item.price }}</p>
                                </div>
                            </div>
                        </td>
                        <td class="align-middle text-center">{{ item.quantity }}</td>
                        <td class="align-middle text-center">Rs. {{ item.price }}</td>
                    </tr>
                    {% endfor %}
                    
                </tbody>
            </table>
        </div>

        <!-- Delivery & Review -->
        <div class="d-flex justify-content-between align-items-center mt-3">
            <p class="mb-0 text-muted">Delivery expected soon</p>
            <div class="d-flex align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#F4C430" class="bi bi-star-fill me-1" viewBox="0 0 16 16">
                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.89-.696L7.538.792c.197-.367.73-.367.927 0l2.184 4.327 4.89.696c.441.063.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                </svg>
                <small class="text-muted">Rate and Review the Product</small>
            </div>
        </div>
    </div>
</div>
{% endblock %}
